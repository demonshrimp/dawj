<!DOCTYPE HTML>
<html>
<head>
    <title>个人中心</title>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all"/>
    <link href="css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="keywords" content="心理咨询,咨询,心理,大爱无疆">
    <link href='http://fonts.useso.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'/>
    <link href="js/vendor/bootstrapvalidator/dist/css/bootstrapValidator.min.css"/>
    <script src="js/vendor/jquery.min.js"></script>
    <script src="js/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="js/vendor/bootstrapvalidator/dist/js/bootstrapValidator.js"></script>
    <script src="js/main.js"></script>
    <link rel="stylesheet" href="css/flexslider.css" type="text/css" media="screen"/>
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.css" rel="stylesheet"/>
    <style>
        .tab-content {
            padding-top: 30px;
        }

        .panel {
            margin-bottom: 0;
        }

        .order-list-heading {
            margin: 20px 5px;
            border-bottom: 1px solid gray;
        }

        .order-heading label {
            padding-left: 5px;
            padding-right: 5px;
        }

        .order-body span {
            display: block;
            padding: 6px 12px;
        }

        .order-body strong.visible-sm, .order-body strong.visible-xs {
            display: inline !important;
        }

    </style>
</head>
<body>
<!-- header -->
<div class="header">
    <div class="header-top">
        <div class="container">
            <div class="head-left">
                <ul class="number">
                    <li><span><i class="phone"> </i>0371-55601221</span></li>
                    <li><a href="mailto:info@dawjxlzx.com"><i class="mail"></i>info@dawjxlzx.com</a></li>
                    <div class="clearfix"></div>
                </ul>
            </div>
            <div class="head-right hidden">
                <ul>
                    <li><a href="#"><i class="fb"> </i></a></li>
                    <li><a href="#"><i class="twt"> </i></a></li>
                    <li><a href="#"><i class="ttt"> </i></a></li>
                    <li><a href="#"><i class="ve"> </i></a></li>
                    <li><a href="#"><i class="in"> </i></a></li>
                    <li><a href="#"><i class="dib"> </i></a></li>
                    <li><a href="#"><i class="fli"> </i></a></li>
                    <li><a href="#"><i class="rss"> </i></a></li>
                    <div class="clearfix"></div>
                </ul>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <div class="header-bottom">
        <div class="container">
            <div class="logo animated slideInDown hidden">
                <a href="index.html"><img src="images/logo1.png" class="img-responsive" alt=""></a>
            </div>
            <div class="head-nav">
                <span class="menu"> </span>
                <ul class="cl-effect-3">
                    <li class="active"><a href="index.html">首页</a></li>
                    <li><a href="counselors.html">找咨询师 </a></li>
                    <li><a href="psychological-test.html">心理测评 </a></li>
                    <li><a href="counseling-articles.html">心理案例 </a></li>
                    <li class="hidden"><a href="about.html">关于</a></li>
                    <li class="hidden"><a href="contact.html">联系我们</a></li>
                    <div class="clearfix"></div>
                </ul>
                <!-- script-for-nav -->
                <script>
                    $("span.menu").click(function () {
                        $(".head-nav ul").slideToggle(300, function () {
                            // Animation complete.
                        });
                    });
                </script>
                <!-- script-for-nav -->
            </div>
            <div class="header-right1">
                <ul id="loginPanel">
                    <li><a href="login.html">登录</a></li>
                    <li><a href="register.html">注册</a></li>
                </ul>
                <p id="unLoginPanel" class="hidden">欢迎，
                    <a id="userName" href="user-center.html">用户</a>　
                    <a href="user-center.html">[个人中心]</a><a href="#login.html">[注销]</a>
                </p>
            </div>
            <div class="header-right1">
                <a id="selectSite" href="#"></a>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
<!-- header -->
<!-- registration -->
<div class="main-1">
    <div class="container">
        <div class="register">
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active">
                    <a href="#home" aria-controls="home" role="tab" data-toggle="tab">用户信息</a>
                </li>
                <li role="presentation">
                    <a href="#order" aria-controls="order" role="tab" data-toggle="tab" id="controlsOrder">我的订单</a>
                </li>
            </ul>
            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="home">
                    <form id="formUser">
                        <div class="register-top-grid">
                            <h3>个人信息</h3>
                            <div class="wow fadeInLeft form-group" data-wow-delay="0.4s">
                                <span>姓名<label>*</label></span>
                                <input name="name" type="text">
                            </div>
                            <div class="wow fadeInLeft form-group" data-wow-delay="0.4s">
                                <span>生日<label>*</label></span>
                                <input name="birthday" type="date">
                            </div>
                            <div class="wow fadeInLeft form-group" data-wow-delay="0.4s">
                                <span>性别<label>*</label></span>
                                <input type="radio" name="sex" value="MALE"/> 男
                                <input type="radio" name="sex" value="FEMALE"/> 女
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="register-bottom-grid">
                            <h3>登录信息</h3>
                            <div class="wow fadeInLeft form-group" data-wow-delay="0.4s">
                                <span>密码<label>*</label></span>
                                <input name="password" type="password">
                            </div>
                            <div class="wow fadeInRight form-group" data-wow-delay="0.4s">
                                <span>确认密码<label>*</label></span>
                                <input name="confirmPassword" type="password">
                            </div>
                            <div class="wow fadeInLeft form-group" data-wow-delay="0.4s">
                                <span>手机<label>*</label></span>
                                <input name="mobile" disabled type="text">
                            </div>
                        </div>
                    </form>
                    <div class="clearfix"></div>
                    <div class="register-but">
                        <form action="javascript:void(0);">
                            <input id="btnSave" type="submit" value="保存">
                            <div class="clearfix"></div>
                        </form>
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane order-list" id="order">
                    <div class="row order-list-heading hidden-sm hidden-xs">
                        <div class="col-md-6"><label>商品信息</label></div>
                        <div class="col-md-2"><label>实际金额</label></div>
                        <div class="col-md-2"><label>状态</label></div>
                        <div class="col-md-2"><label>操作</label></div>
                    </div>
                    <div id="orders">
                        <!--<div class="panel panel-default order">
                            &lt;!&ndash; Default panel contents &ndash;&gt;
                            <div class="panel-heading order-heading">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-4 col-md-3">
                                        <label>　订单号：</label><a href="#">201604090001</a>
                                    </div>
                                    <div class="col-xs-12 col-sm-8 col-md-9">
                                        <label>下单时间：</label><span>2016-04-09 16:10:34</span>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-body order-body">
                                <div class="col-md-6">
                                    <div class="col-md-6">
                                        <a href="#" class="thumbnail">
                                            <img src="images/p61.png" alt="...">
                                        </a>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong>咨询师：</strong><a href="#">张洋</a></p>
                                        <p>　</p>
                                        <p><strong>费率：</strong>200元/小时</p>
                                        <p>　</p>
                                        <p style="margin-bottom: 10px"><strong>时长：</strong>5小时</p>
                                    </div>
                                </div>
                                <div class="col-md-2"><span><strong
                                        class="visible-sm visible-xs">实际金额：</strong>￥1000</span>
                                </div>
                                <div class="col-md-2 col-xs-8"><span><strong
                                        class="visible-sm visible-xs">状态：</strong>待付款</span>
                                </div>
                                <div class="col-md-2 col-xs-4"><a class="btn btn-link" href="#">付款</a></div>
                            </div>
                        </div>-->
                    </div>
                    <div class="blog-pagenat">
                        <ul>
                            <li><a class="frist" href="#"> <span> </span></a></li>
                        <span id="pages">
                            <li><a class="go-page" data-start="+" href="#">1</a></li>
                        </span>
                            <li><a class="last" href="#"> <span> </span></a></li>
                            <div class="clearfix"></div>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- registration -->

<!-- footer-top -->
<div class="footer-top">
    <div class="container">
        <div class="col-md-4 foo-left">
            <h3>公司简介</h3>
            <a href="index.html" class="hidden"><img src="images/logo1.png" class="img-responsive" alt=""></a>
            <p>大爱无疆心理咨询有限公司是在教育部政策（教思政厅[2011]1号）的影响下应运而生的全国目前唯一一家无区域执业的心理咨询公司。</p>
            <p>公司具备资质：心理咨询；教育咨询；非学历短期培训（国内基本已停止审批）；人力中介服务（国内基本已停止审批）；教育文化交流活动组织策划；教育软件技术开发等。以上资质全国范围内均可使用。</p>
        </div>
        <div class="col-md-4 foo-left">
            <h3>公司概况</h3>
            <h6>成立情况</h6>
            <p>2016年1月由中国工商总局核名后注册成立。</p>
            <p>2016年3月份正式运营。</p>
            <h6>荣誉</h6>
            <p> 河南电视台法制频道优秀心理咨询机构。</p>
            <p>河南大象融媒集团心理咨询模范单位。</p>
        </div>
        <div class="col-md-4 foo-left">
            <h3>联系我们</h3>
            <ul>
                <li><p><span class="glyphicon glyphicon-phone-alt" style="font-size: 17px;margin: 0 4px"></span>0371-55601221
                </p>
                </li>
                <li><p href="mailto:info@dawjxlzx.com"><i class="mail"></i>info@dawjxlzx.com</p></li>
                <li><p><span class="glyphicon glyphicon-home" style="font-size: 17px;margin: 0 4px"></span>河南省郑州市金水区经三路66号金成国际广场4号楼2单元1102
                </p>
                </li>
                <!--<li class="active"><a href="index.html">首页</a></li>
                <li class="active"><a href="about.html">关于我们</a></li>
                <li><a href="#">咨询师 </a></li>
                <li><a href="#">心理咨询 </a></li>
                <li><a href="blog.html">联系我们</a></li>
                <li><a href=" 404.html">个人中心</a></li>-->
                <div class="clearfix"></div>
            </ul>
        </div>
        <div class="clearfix"></div>

        <div class="col-md-12 foo-left">
            <h3>友情链接</h3>
            <ol class="breadcrumb friendly-link" id="friendshipSiteList">
            </ol>
            <script type="text/javascript">
                $(function () {
                    $.get(App.Constants.API_BASE + '/friendship-site/list', function (result) {
                        if (result.header.success) {
                            var friendshipSites = result.body;
                            var list = $('#friendshipSiteList');
                            list.empty();
                            for (var i = 0; i < friendshipSites.length; i++) {
                                var friendshipSite = friendshipSites[i];
                                list.append('<li><a href="' + friendshipSite.url + '" target="_blank">' + friendshipSite.name + '</a></li>');
                            }
                        }
                    });
                })
            </script>
        </div>
    </div>
</div>
<!-- footer-top -->
<!-- footer-bottom -->
<div class="footer-bottom">
    <div class="container">
        <p>Copyright &copy; 2016.大爱无疆 All rights reserved.</p>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">支付</h4>
            </div>
            <div class="modal-body">
                <p><label>请选择在线支付方式：</label></p>
                <form class="form-inline" id="formPayment">
                    <input type="hidden" name="orderId" id="hiddenOrderId">
                    <div class="form-group" style="width: 100%">
                        <div class="radio col-md-6">
                            <label>
                                <input type="radio" name="paymentType" value="alipay" checked/>
                                <img src="images/ssdk_oks_classic_alipay.png"/>
                                支付宝支付
                            </label>
                        </div>
                        <div class="radio col-md-6">
                            <label>
                                <input type="radio" name="paymentType" value="wechat" checked/>
                                <img src="images/ssdk_oks_classic_wechat.png"/>
                                微信支付
                            </label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">稍后支付</button>
                <button type="button" class="btn btn-primary" id="btnSubmitPay">确定</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="weichatPayModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">微信扫码支付</h4>
            </div>
            <div class="modal-body">
                <p><label>请扫描下面的二维码：</label></p>
                <div style="width: 256px;height: 256px;" class="center-block" id="imgWechatPayCode">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">支付遇到问题</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">支付完成</button>
            </div>
        </div>
    </div>
</div>
<!-- footer-bottom -->
<script src="js/vendor/jquery.qrcode.min.js"></script>
<script src="js/orderUtil.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
    $.get(App.Constants.API_BASE + '/wechat/jsapi-signature', function (data) {
        wx.config({
            debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: 'wxc086c323ecb8c170', // 必填，公众号的唯一标识
            timestamp: data.timestamp, // 必填，生成签名的时间戳
            nonceStr: data.nonceStr, // 必填，生成签名的随机串
            signature: data.signature,// 必填，签名，见附录1
            jsApiList: ['chooseWXPay'] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
        });
        //jsApiList: ["menuItem:share:appMessage", "menuItem:share:timeline", "menuItem:share:qq", "menuItem:share:weiboApp", "menuItem:share:facebook", "menuItem:share:QZone"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2

        wx.ready(function () {

        });
        wx.error(function (res) {
            alert('初始化错误：' + res.toString());
            // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。
        });

    });

    function payWithWechat(data, success) {
        wx.chooseWXPay({
            timestamp: data.timestamp, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符
            nonceStr: data.nonceStr, // 支付签名随机串，不长于 32 位
            package: data.package, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）
            signType: data.signType, // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'
            paySign: data.paySign, // 支付签名
            success: success
        });
    }
</script>
<script>
    $(function () {

        //init views;
        if (window.location.toString().indexOf('#order') > 0) {
            $('#controlsOrder').tab('show');
        }
        var form = $('#formUser').bootstrapValidator({
            message: '未通过校验',
            feedbackIcons: {
                valid: 'glyphicon glyphicon-ok',
                invalid: 'glyphicon glyphicon-remove',
                validating: 'glyphicon glyphicon-refresh'
            },
            fields: {
                name: {
                    message: '姓名格式不正确',
                    validators: {
                        notEmpty: {
                            message: '姓名不能为空'
                        },
                        stringLength: {
                            min: 3,
                            max: 10,
                            message: '姓名必须为2~10位之间'
                        }
                    }
                },
                birthday: {
                    validators: {
                        notEmpty: {
                            message: '生日不能为空'
                        },
                        date: {
                            format: 'YYYY-MM-DD',
                            message: '生日格式不正确'
                        }
                    }
                },
                sex: {
                    validators: {
                        notEmpty: {
                            message: '性别不能为空'
                        }
                    }
                },
                password: {
                    validators: {
                        notEmpty: {
                            message: '密码不能为空'
                        }
                    },
                    stringLength: {
                        min: 6,
                        max: 32,
                        message: '密码长度为6~32位'
                    }
                },
                confirmPassword: {
                    validators: {
                        notEmpty: {
                            message: '确认密码不能为空'
                        },
                        identical: {
                            field: 'password',
                            message: '两次密码输入不一致'
                        }
                    }
                },
                mobile: {
                    validators: {
                        notEmpty: {
                            message: '手机不能为空'
                        }
                    }
                },
                captcha: {
                    validators: {
                        notEmpty: {
                            message: '验证码不能为空'
                        }
                    }
                }
            }
        });
        var validator = form.data('bootstrapValidator');


        //init datas
        updateForm(App.getCurrentLoginUser(true));
        $.get(App.Constants.API_BASE + '/user/personal-details', function (result) {
            if (result) {
                if (!result.header.success) {
                    alert(result.header.message);
                    return;
                }
                updateForm(result.body);
            }
        });
        loadPage(0);

        //init evens

        $('#btnSave').click(function () {
            validator.validate();
            if (validator.isValid()) {
                var user = App.Utils.FormUtil.toJson(form);
                user.birthday = user.birthday + ' 00:00:00';
                user.password = App.Utils.StringUtil.md5(user.password);
                $.ajax({
                    url: App.Constants.API_BASE + '/user/',
                    contentType: "application/json",
                    method: 'POST',
                    data: JSON.stringify(user),
                    dataType: 'json',
                    success: function (result) {
                        alert(result.header.message);
                        if (result.header.success) {
                            window.location.href = 'login.html';
                        }
                    }
                });
            }
        });

        $('.blog-pagenat').on('click', '.go-page', function () {
            var start = $(this).data('start');
            loadPage(start);
        });

        $('.frist').click(function () {
            loadPage(0);
        });

        $('.last').click(function () {
            loadPage($('.go-page').length);
        });

        $('#orders').on('click', '.btn-pay', function () {
            var orderId = $(this).data('id');
            $('#hiddenOrderId').val(orderId);
            wx.checkJsApi({
                jsApiList: ['chooseWXPay'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
                success: function (res) {
                    if (res.checkResult.chooseWXPay) {
                        $.get(App.Constants.API_BASE + '/order/' + orderId + '/wechat-payment-signature', function (result) {
                            if (!result.header.success) {
                                alert(result.header.message);
                                return;
                            }
                            payWithWechat(result.body);
                        })
                    } else {
                        $('#myModal').modal({keyboard: false});
                    }
                }
            });
        });

        $('#orders').on('click', '.btn-close', function () {
            var orderId = $(this).data('id');
            if (confirm('确定要关闭这个订单吗？(该操作不可恢复)')) {
                $.ajax({
                    url: App.Constants.API_BASE + '/order/' + orderId + '/close',
                    type: 'PUT',
                    success: function (result) {
                        if (result.header.success) {
                            loadPage(0);
                        } else {
                            alert(result.header.message);
                        }
                    }
                });
            }
        });

        $('#orders').on('click', '.btn-refund', function () {
            var orderId = $(this).data('id');
            if (confirm('确定要申请退款吗？')) {
                $.ajax({
                    url: App.Constants.API_BASE + '/order/' + orderId + '/refund-app',
                    type: 'PUT',
                    success: function (result) {
                        if (result.header.success) {
                            loadPage(0);
                        } else {
                            alert(result.header.message);
                        }
                    }
                });
            }
        });


        $('#btnSubmitPay').click(function () {
            var payment = App.Utils.FormUtil.toJson('#formPayment');
            switch (payment.paymentType) {
                case 'alipay' :
                    var url = App.Constants.API_BASE;
                    window.open(url.substr(0, url.length - 8) + '/alipay/orderpay.jsp?orderId=' + payment.orderId);
                    $('#myModal').modal('hide');
                    break;
                case 'wechat' :
                    $.get(App.Constants.API_BASE + '/order/' + payment.orderId + '/create-wechat-payment', function (result) {
                        $('#myModal').modal('hide');
                        if (!result.header.success) {
                            alert(result.header.message);
                            return;
                        }
                        $('#imgWechatPayCode').empty();
                        $('#imgWechatPayCode').qrcode(result.body);
                        $('#weichatPayModal').modal({
                            keyboard: false
                        });
                    });
                    break;
            }
        });

        $('#weichatPayModal').on('hidden.bs.modal', function (e) {
            loadPage(0);
        });

        //state methods
        function updateForm(user) {
            user.password = '!notmodified';
            user.confirmPassword = user.password;
            if (user.birthday) {
                user.birthday = user.birthday.replace(' 00:00:00', '');
            }
            App.Utils.FormUtil.setData(form, user);
            form.find('[name="sex"]').each(function (index) {
                if (index == 1) {
                    this.value = 'FAMALE';
                } else {
                    this.value = 'MALE';
                }
                if (this.value == user.sex) {
                    this.checked = true;
                }
            });
        }

        function loadPage(start) {
            $.get(App.Constants.API_BASE + '/order/page?orderBy=createTime&desc=true&length=5&start=' + start, function (result) {
                if (result.header.success) {
                    var pageInfo = result.body;
                    var orders = pageInfo.list;
                    var list = $('#orders');
                    list.empty();
                    for (var i = 0; i < orders.length; i++) {
                        var order = orders[i];
                        list.append('<div class="panel panel-default order">'
                                + '   <div class="panel-heading order-heading">'
                                + '                <div class="row">'
                                + '         <div class="col-xs-12 col-sm-7 col-md-5">'
                                + '             <label>　订单号：</label><a href="#">' + order.id + '</a>'
                                + '         </div>'
                                + '         <div class="col-xs-12 col-sm-5 col-md-7">'
                                + '             <label>下单时间：</label><span>' + order.createTime + '</span>'
                                + '         </div>'
                                + '     </div>'
                                + ' </div>'
                                + ' <div class="panel-body order-body">'
                                + '     <div class="col-md-6">'
                                + '         <div class="col-md-6">'
                                + '             <a href="counselor.html?id=' + order.counselor.id + '" class="thumbnail">'
                                + '                 <img src="' + order.counselor.fullImage + '" alt="...">'
                                + '             </a>'
                                + '         </div>'
                                + '         <div class="col-md-6">'
                                + '             <p><strong>咨询师：</strong><a href="counselor.html?id=' + order.counselor.id + '">' + order.counselor.name + '</a></p>'
                                + '             <p>　</p>'
                                + '             <p><strong>费率：</strong>' + order.counselor.fees + '元/小时</p>'
                                + '             <p>　</p>'
                                + '             <p style="margin-bottom: 10px"><strong>时长：</strong>' + order.consultingDuration + '小时</p>'
                                + '         </div>'
                                + '     </div>'
                                + '     <div class="col-md-2"><span><strong class="visible-sm visible-xs">实际金额：</strong>￥' + order.amount + '</span>'
                                + '     </div>'
                                + '     <div class="col-md-2 col-sm-8"><span><strong class="visible-sm visible-xs">状态：</strong>' + App.Utils.OrderUtil.getStatusText(order.status) + '</span>'
                                + '     </div>'
                                + '     <div class="col-md-2 col-sm-4">' + getOrderHandler(order) + '</div>'
                                + ' </div>'
                                + '</div>');
                    }

                    var pages = $('#pages');
                    pages.empty();
                    for (var i = 0; i < pageInfo.amount; i++) {
                        if (i == start) {
                            pages.append('<li><a class="current-page" href="#start=' + i + '" >' + (i + 1) + '</a></li>');
                        } else {
                            pages.append('<li><a class="go-page" href="#start=' + i + '" data-start="' + i + '">' + (i + 1) + '</a></li>');
                        }
                    }

                    window.scrollTo(0, 0)
                }
            });
        }

        function getOrderHandler(order) {
            var html = '';
            switch (order.status) {
                case 'NEW':
                    html = '<a class="btn btn-primary btn-pay" href="#" data-id="' + order.id + '")">付款</a>'
                            + '/<a class="btn btn-primary btn-close" href="#" data-id="' + order.id + '")">关闭</a>';
                    break;
                case 'PAID':
                    html = '<a class="btn btn-primary btn-refund" href="#" data-id="' + order.id + '")">退款</a>';
                    break;
            }
            return html;
        }
    });
</script>
</body>
</html>